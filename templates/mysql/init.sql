CREATE TABLE `minerva`.`count_people_table` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `people_count` INT NOT NULL,
  `date_timestamp` DATE NOT NULL,
  PRIMARY KEY (`id`));

CREATE TABLE `minerva`.`subcategory` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `value` varchar(100) CHARACTER SET utf8 NOT NULL,
  UNIQUE KEY `value_UNIQUE` (`value`),
  PRIMARY KEY (`id`));
  
INSERT INTO `minerva`.`subcategory` VALUES
(1, "trafficJam"),
(2, "carAccident"),
(3, "carWrongDirection"),
(4, "carStopped"),
(5, "fertilisation"),
(6, "pothole"),
(7, "roadClosed"),
(8, "roadWorks"),
(9, "hazardOnRoad"),
(10, "injuredBiker"),
(11, "flood"),
(12, "tsunami"),
(13, "coastalEvent"),
(14, "earthquake"),
(15, "rainfall"),
(16, "highTemperature"),
(17, "lowTemperature"),
(18, "heatWave"),
(19, "coldWave"),
(20, "ice"),
(21, "snow"),
(22, "wind"),
(23, "fog"),
(24, "tornado"),
(25, "tropicalCyclone"),
(26, "hurricane"),
(27, "snow/ice"),
(28, "thunderstorms"),
(29, "fireRisk"),
(30, "avalancheRisk"),
(31, "floodRisk"),
(32, "airPollution"),
(33, "waterPollution"),
(34, "pollenConcentration"),
(35, "asthmaAttack"),
(36, "bumpedPatient"),
(37, "fallenPatient"),
(38, "heartAttack"),
(39, "suspiciousAction"),
(40, "robbery"),
(41, "assault"),
(42, "civilDisorder"),
(43, "buildingFire"),
(44, "forestFire"),
(45, "noxiousWeed"),
(46, "snail"),
(47, "insect"),
(48, "rodent"),
(49, "bacteria"),
(50, "microbe"),
(51, "fungus"),
(52, "mite"),
(53, "virus"),
(54, "nematodes"),
(55, "irrigation"),
(56, "lowHumidity"),
(57, "highHumidity"),
(58, "crowdRisk"),
(59, "highAtmosphericPressure"),
(60, "lowAtmosphericPressure"),
(61, "badSeaState");

CREATE TABLE `minerva`.`category` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `value` varchar(100) CHARACTER SET utf8 NOT NULL,
  UNIQUE KEY `value_UNIQUE` (`value`),
  PRIMARY KEY (`id`));
 
INSERT INTO `minerva`.`category` VALUES
(1, "traffic"),
(2, "naturalDisaster"),
(3, "weather"),
(4, "environment"),
(5, "health"),
(6, "security"),
(7, "agriculture");

CREATE TABLE `minerva`.`severity` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `value` varchar(100) CHARACTER SET utf8 NOT NULL,
  UNIQUE KEY `value_UNIQUE` (`value`),
  PRIMARY KEY (`id`));

INSERT INTO `minerva`.`severity` VALUES
(1, "informational"),
(2, "low"),
(3, "medium"),
(4, "high"),
(5, "critical");

CREATE TABLE `minerva`.`relational` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `id_category` INT NOT NULL,
  `id_subcategory` INT NOT NULL,
  FOREIGN KEY (id_category) references category(id),
  FOREIGN KEY (id_subcategory) references subcategory(id),
  PRIMARY KEY (`id`));

INSERT INTO `minerva`.`relational` (id, id_subcategory, id_category) VALUES
(1,1,1),
(2,2,1),
(3,3,1),
(4,4,1),
(5,5,7),
(6,6,1),
(7,7,1),
(8,8,1),
(9,9,1),
(10,10,1),
(11,11,2),
(12,12,2),
(13,13,2),
(14,14,2),
(15,15,3),
(16,16,3),
(17,17,3),
(18,18,3),
(19,19,3),
(20,20,3),
(21,21,3),
(22,22,3),
(23,23,3),
(24,24,2),
(25,25,2),
(26,26,2),
(27,27,3),
(28,28,3),
(29,29,4),
(30,30,2),
(31,31,2),
(32,32,5),
(33,32,4),
(34,33,5),
(35,33,4),
(36,34,5),
(37,34,4),
(38,35,5),
(39,36,5),
(40,37,5),
(41,38,5),
(42,39,6),
(43,40,6),
(44,41,6),
(45,42,6),
(46,43,4),
(47,44,4),
(48,45,4),
(49,46,4),
(50,47,5),
(51,48,5),
(52,49,5),
(53,50,5),
(54,51,5),
(55,52,5),
(56,53,5),
(57,54,5),
(58,55,7),
(59,56,3),
(60,57,3),
(61,58,5),
(62,59,3),
(63,60,3),
(64,61,3);

CREATE TABLE `minerva`.`rules` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `rule_name` VARCHAR(100) NOT NULL,
  `service_name` VARCHAR(100) NOT NULL,
  `entity_type` VARCHAR(100) NOT NULL,
  `attribute_name` VARCHAR(25) NOT NULL,
  `operator` VARCHAR(15) NOT NULL, 
  `threshold` INT NOT NULL,
  `value_category` varchar(100) CHARACTER SET utf8 NOT NULL,
  `value_subcategory` varchar(100) CHARACTER SET utf8 NOT NULL,
  `value_severity` varchar(100) CHARACTER SET utf8 NOT NULL,
  `subscription_id` VARCHAR(100),
  `recurrence_seconds` INT,
  FOREIGN KEY (`value_category`) references category(`value`),
  FOREIGN KEY (`value_subcategory`) references subcategory(`value`),
  FOREIGN KEY (`value_severity`) references severity(`value`),
  PRIMARY KEY (`id`));